!function(a){"use strict";function b(){function a(a){var c;for(c in b)"undefined"!==a&&b.hasOwnProperty(c)&&a(b[c])}var b={};this.generate=function(a){b[g(a.id)]=new c(a)},this.pauseGalleryById=function(a){b[a].pause()},this.resumeGalleryById=function(a){b[a].resume()},this.pauseAllGalleries=function(){a(function(a){a.pause()})},this.resumeAllGalleries=function(){a(function(a){a.resume()})},this.addImageToGallery=function(a,c,d){b[a].addImage(c,d)},this.removeImageFromGallery=function(a,c,d){b[a].removeImage(c,d)},this.setOnFullyLoaded=function(a,c){b[a].onFullyLoaded=c},this.getItems=function(){return b},this.getItem=function(a){return b[a]}}function c(a){function b(){return w.offsetWidth/w.offsetHeight}function d(){var a,b=u.length;for(a=0;b>a;a+=1)u[a].calculatedValues=e(u[a])}function e(a){var b,c=w.offsetWidth,d=w.offsetHeight;return b=a.ratio<H?{backgroundWidth:c,backgroundHeight:"auto",backgroundPosX:0,backgroundPosY:parseInt((d-c/a.ratio)/2)}:{backgroundWidth:"auto",backgroundHeight:d,backgroundPosX:parseInt((c-d*a.ratio)/2),backgroundPosY:0}}function f(){var a,b,c;x&&(a=u[y].calculatedValues.backgroundWidth,b=u[y].calculatedValues.backgroundHeight,c="auto"===a?"auto "+b+"px":a+"px auto",w.style.backgroundSize=c,w.style.backgroundPositionX=u[y].calculatedValues.backgroundPosX+"px",w.style.backgroundPositionY=u[y].calculatedValues.backgroundPosY+"px")}function h(){w.getElementsByClassName("loader")[0].style.display="none",d(),i(),G||(G=!0,this.onFullyLoaded())}function i(){D=new Date,B=setInterval(function(){l("next")},v)}function k(){C=new Date-D+C}function l(a){var b=u.length;"next"===a?y+1>=b?y=0:y+=1:-1>=y-1?y=b-1:y-=1,f(),w.style.backgroundImage="url("+u[y].url+")",D=new Date,document.dispatchEvent(s)}function m(){w.innerHTML=w.innerHTML+'<span class="loader"></span>'}function n(a){z+=1,this instanceof c&&this.onImageLoaded(a)}function o(){var a,b=u.length;for(a=0;b>a;a+=1)p.apply(this,[u[a],a])}function p(a,b){var c=new Image,d={},g=this;c.onload=function(){d.width=this.width,d.height=this.height,d.ratio=d.width/d.height,d.url=a,u[b]=d,n.apply(g,[this]),0!==b||A||(w.style.backgroundImage='url("'+this.src+'")'),0===b&&(u[b].calculatedValues=e(d),f()),z!==u.length||G||h.apply(g)},c.src=a}function q(a){var b,c=u.length;for(b=0;c>b&&!a(b);b+=1);}function r(a,b){var c=[];return q(function(d){return u[d].url===a&&(c.push(d),b===c.length)?!0:void 0}),0===c.length?!1:c}var s,t=g(a.id)||null,u=a.backgrounds||null,v=a.galleryTimer||j.galleryTimer,w=a.containerElement||document.getElementById(a.id)||document.createElement("div"),x=a.autoResizeImages||!0,y=0,z=0,A=""!==w.style.backgroundImage,B=null,C=0,D=null,E=!1,F=null,G=!1,H=b();typeof Event===constructor&&(s=new Event(t+"-on-bg-change")),""!==w.getAttribute("id")&&w.setAttribute("id",a.id),this.pause=function(){E||(E=!0,k(),clearTimeout(F),clearInterval(B))},this.resume=function(){var a;E&&(E=!1,a=v-C,D=new Date,F=setTimeout(function(){l("next"),C=0,i()},a))},this.addImage=function(a,b){"undefined"!=typeof b&&b===!0?p(a,u.length):r(a,1)||p(a,u.length)},this.removeImage=function(a,b){var c,d,e;if("undefined"==typeof b&&(c=r(a),e=c.length,c!==!1))for(d=0;e>d;d+=1)u.splice(c[d]-d,1)},this.getGalleryId=function(){return t},this.onFullyLoaded=a.onFullyLoaded||function(){},this.onImageLoaded=a.onImageLoaded||function(){},m(),o.apply(this)}function d(a){var b=/'|"|url|\s|\(|\)/g;return a.replace(b,"")}function e(a){var b=a.querySelectorAll("[data-bg-src]"),c=b.length,e=a.style.backgroundImage,f=[];""!==e&&f.push(d(e));for(var g=0;c>g;g+=1)f.push(b[g].getAttribute("data-bg-src"));return f}function f(a){var b=k[a];return{id:"autoElem"+a,containerElement:b,backgrounds:e(b)}}function g(a){return a.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})}var h,i,j,k=document.querySelectorAll("[data-bg-auto]"),l=k.length;if(i={alreadyDefined:"BackgroundGallery is already defined, exit loading"},j={galleryTimer:5e3,imageLoaderThreshold:300},h=new b,l>0)for(var m=0;l>m;m+=1)h.generate(f(m));"undefined"==typeof a.BackgroundGallery?a.BackgroundGallery=h:console.error(i.alreadyDefined)}(window);