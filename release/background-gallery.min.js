!function(a){"use strict";function b(a){function c(){return u.offsetWidth/u.offsetHeight}function d(){var a,b=s.length;for(a=0;b>a;a+=1)s[a].calculatedValues=e(s[a])}function e(a){var b,c=u.offsetWidth,d=u.offsetHeight;return b=a.ratio<F?{backgroundWidth:c,backgroundHeight:"auto",backgroundPosX:0,backgroundPosY:parseInt((d-c/a.ratio)/2)}:{backgroundWidth:"auto",backgroundHeight:d,backgroundPosX:parseInt((c-d*a.ratio)/2),backgroundPosY:0}}function f(){var a,b,c;v&&(a=s[w].calculatedValues.backgroundWidth,b=s[w].calculatedValues.backgroundHeight,c="auto"===a?"auto "+b+"px":a+"px auto",u.style.backgroundSize=c,u.style.backgroundPositionX=s[w].calculatedValues.backgroundPosX+"px",u.style.backgroundPositionY=s[w].calculatedValues.backgroundPosY+"px")}function h(){u.getElementsByClassName("loader")[0].style.display="none",d(),i(),E||(E=!0,this.onFullyLoaded())}function i(){B=new Date,z=setInterval(function(){l("next")},t)}function k(){A=new Date-B+A}function l(a){var b=s.length;"next"===a?w+1>=b?w=0:w+=1:-1>=w-1?w=b-1:w-=1,f(),u.style.backgroundImage="url("+s[w].url+")",B=new Date}function m(){u.innerHTML=u.innerHTML+'<span class="loader"></span>'}function n(a){x+=1,this instanceof b&&this.onImageLoaded(a)}function o(){var a,b=s.length;for(a=0;b>a;a+=1)p.apply(this,[s[a],a])}function p(a,b){var c=new Image,d={},g=this;c.onload=function(){d.width=this.width,d.height=this.height,d.ratio=d.width/d.height,d.url=a,s[b]=d,n.apply(g,[this]),0!==b||y||(u.style.backgroundImage='url("'+this.src+'")'),0===b&&(s[b].calculatedValues=e(d),f()),x!==s.length||E||h.apply(g)},c.src=a}function q(a){var b,c=s.length;for(b=0;c>b&&!a(b);b+=1);}function r(a,b){var c=[];return q(function(d){return s[d].url===a&&(c.push(d),b===c.length)?!0:void 0}),0===c.length?!1:c}var s=(g(a.id)||null,a.backgrounds||null),t=a.galleryTimer||j.galleryTimer,u=a.containerElement||document.getElementById(a.id),v=a.autoResizeImages||!0,w=0,x=0,y=""!==u.style.backgroundImage,z=null,A=0,B=null,C=!1,D=null,E=!1,F=c();""!==u.getAttribute("id")&&u.setAttribute("id",a.id),this.pause=function(){C||(C=!0,k(),clearTimeout(D),clearInterval(z))},this.resume=function(){var a;C&&(C=!1,a=t-A,B=new Date,D=setTimeout(function(){l("next"),A=0,i()},a))},this.addImage=function(a,b){"undefined"!=typeof b&&b===!0?p(a,s.length):r(a,1)||p(a,s.length)},this.removeImage=function(a,b){var c,d,e;if("undefined"==typeof b&&(c=r(a),e=c.length,c!==!1))for(d=0;e>d;d+=1)s.splice(c[d]-d,1)},this.onFullyLoaded=a.onFullyLoaded||function(){},this.onImageLoaded=a.onImageLoaded||function(){},m(),o.apply(this)}function c(a){var b=/'|"|url|\s|\(|\)/g;return a.replace(b,"")}function d(a){var b=a.querySelectorAll("[data-bg-src]"),d=b.length,e=a.style.backgroundImage,f=[];""!==e&&f.push(c(e));for(var g=0;d>g;g+=1)f.push(b[g].getAttribute("data-bg-src"));return f}function e(a){var b=k[a];return{id:"autoElem"+a,containerElement:b,backgrounds:d(b)}}function f(a){var b;for(b in m)"undefined"!==a&&m.hasOwnProperty(b)&&a(m[b])}function g(a){return a.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})}var h,i,j,k=document.querySelectorAll("[data-bg-auto]"),l=k.length,m=[];if(i={alreadyDefined:"BackgroundGallery is already defined, exit loading"},j={galleryTimer:5e3,imageLoaderThreshold:300},h={generate:function(a){m[g(a.id)]=new b(a)},pauseGalleryById:function(a){m[a].pause()},resumeGalleryById:function(a){m[a].resume()},pauseAllGalleries:function(){f(function(a){a.pause()})},resumeAllGalleries:function(){f(function(a){a.resume()})},addImageToGallery:function(a,b,c){m[a].addImage(b,c)},removeImageFromGallery:function(a,b,c){m[a].removeImage(b,c)},setOnFullyLoaded:function(a,b){m[a].onFullyLoaded=b},logItems:function(){console.log(m)}},l>0)for(var n=0;l>n;n+=1)h.generate(e(n));"undefined"==typeof a.BackgroundGallery?a.BackgroundGallery=h:console.error(i.alreadyDefined)}(window);